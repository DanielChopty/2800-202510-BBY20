<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title><%= title %></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body>

    <%- include('templates/header') %>

    <!-- Sidebar Toggle Button -->
    <div class="p-3">
      <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebar">
        Toggle Filters
      </button>
    </div>

    <!-- Sidebar -->
    <div class="offcanvas offcanvas-start bg-primary text-white w-15 w-md-20" tabindex="-1" id="sidebar">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title">Filter by Topics</h5>
        <button type="button" class="btn-close btn-close-white text-reset" data-bs-dismiss="offcanvas"></button>
      </div>
      <div class="offcanvas-body">
        <a href="#" class="btn btn-light btn-sm me-3 my-2">#DailyLife</a>
        <a href="#" class="btn btn-light btn-sm me-3 my-2">#CulturalViews</a>
        <a href="#" class="btn btn-light btn-sm me-3 my-2">#FamilyMatters</a>
        <a href="#" class="btn btn-light btn-sm me-3 my-2">#MoralChoices</a>
        <a href="#" class="btn btn-light btn-sm me-3 my-2">#PersonalValues</a>
        <a href="#" class="btn btn-light btn-sm me-3 my-2">#PublicOpinion</a>
      </div>
    </div>
    
    <!-- Main Content -->
    <main class="container mt-4">
      <div class="mx-auto" style="max-width: 700px;">
        <% let i=0; %>
		    <% for(i=0; i < polls.length; i++) { %>
        <%- include('templates/poll', {poll: polls[i]})  %> 
        <% } %> 
      </div>
      <!-- Additional Polls -->
      </div>
    </main>

    <%- include('templates/footer') %>
    <!-- Keeps track of what polls the user has saved -->
    <% if (user && user.savedPolls) { %>
  <script id="saved-polls-data" type="application/json">
    <%= JSON.stringify(user.savedPolls.map(p => p.toString())) %>
  </script>
<% } %>


    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
    <!-- The javascript code related to save functionality in this page -->
    <script src="polls.js"></script>
  </body>
</html>
